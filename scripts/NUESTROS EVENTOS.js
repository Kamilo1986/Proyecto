const CardsData = [
  {
    _id: "639c723b992482e5f2834be9",
    Nombre: "EVENTOS DIPLOMATICOS",
    Imagen: "https://i.postimg.cc/Fs03hQDt/Collectivities-Party.jpg",
    Fecha: "2022-12-12",
    Descripcion:
      "Disfruta de tus platos favoritos, de diferentes países, en un evento único para toda la familia.",
    Categoria: "Feria de Comida",
    lugar: "CASA DEL EMBAJADOR ",
    Capacidad: 500,
    Asistentes: 200,
    Precio: 30000,
    __v: 0,
  },
  {
    _id:"639c723b992482e5f2834beb",
    Nombre: "TEMATICA ASIATICA",
    Imagen: "https://i.postimg.cc/ZmD3Xf57/Korean-style.jpg",
    Fecha: "2023-08-12",
    Descripcion:
      "Disfruta de los mejores platos Asiaticos, con chefs internacionales y eventos increíbles.",
    Categoria: "Feria de comida",
    lugar: "Restaurante wok",
    Capacidad: 450,
    Precio: 100000,
    __v: 0,
    estimate: 42756,
  },
  {
    _id: "639c723c992482e5f2834bed",
    Nombre: "MUSEO ARQUELOGICO",
    Imagen: "https://i.postimg.cc/GmHRkbNV/Jurassic-Park.jpg",
    Fecha: "2022-11-02",
    Descripcion:
      "Vamos a conocer a los dinosaurios más grandes en el museo de paleontología.",
    Categoria: "Museo",
    lugar: "Field",
    Capacidad: 82000,
    Precio: 15,
    __v: 0,
    Asistentes: 65892,
  },
  {
    _id: "639c723c992482e5f2834bef",
    Nombre: "MUSEO DEL ORO",
    Imagen: "https://i.postimg.cc/c4C2zXm8/Parisian-Museum.jpg",
    Fecha: "2023-11-02",
    Descripcion:
      "Un recorrido único en la ciudad , conoce uno de los lugares más icónicos.",
    Categoria: "Museo",
    lugar: "Bogota",
    Capacidad: 8200,
    estimate: 8200,
    Precio: 3500,
    __v: 0,
  },
  {
    _id: "639c723c992482e5f2834bf1",
    Nombre: "COMICON",
    Imagen: "https://i.postimg.cc/KYD0jMf2/comicon.jpg",
    Fecha: "2022-02-12",
    Descripcion:
      "Para los amantes del cómic, todos tus personajes favoritos reunidos en un solo lugar.",
    Categoria: "Corferias",
    lugar: "Corferias",
    Capacidad: 120000,
    Asistentes: 110000,
    Precio: 54,
    __v: 0,
  },
  {
    _id: "639c723c992482e5f2834bf3",
    Nombre: "NOCHE DE HALLOWEEN",
    Imagen: "https://i.postimg.cc/RZ9fH4Pr/halloween.jpg",
    Fecha: "2023-02-12",
    Descripcion: "Ven con tu disfraz más aterrador y gana premios increíbles.",
    Categoria: "Corferias",
    lugar: "Room C",
    Capacidad: 12000,
    estimate: 9000,
    Precio: 12,
    __v: 0,
  },
  {
    _id: "639c723c992482e5f2834bf5",
    Nombre: "METALLICA EN CONCIERTO",
    Imagen: "https://i.postimg.cc/PrMJ0ZMc/Metallica-in-concert.jpg",
    Fecha: "2023-01-22",
    Descripcion: "El único concierto de la banda más emblemática del mundo.",
    Categoria: "Concierto",
    lugar: "Movistar Arena",
    Capacidad: 138000,
    estimate: 138000,
    Precio: 150,
    __v: 0,
  },
  {
    _id: "639c723c992482e5f2834bf7",
    Nombre: "FIESTA ELECTRONICA",
    Imagen: "https://i.postimg.cc/KvsSK8cj/Electronic-Fest.jpg",
    Fecha: "2022-01-22",
    Descripcion:
      "Los mejores DJs nacionales e internacionales reunidos en un solo lugar.",
    Categoria: "Concierto",
    lugar: "Movistar Arena",
    Capacidad: 138000,
    Asistentes: 110300,
    Precio: 250,
    __v: 0,
  },
  {
    _id: "639c723d992482e5f2834bf9",
    Nombre: "MEDIA MARATON ",
    Imagen: "https://i.postimg.cc/fyLqZY9K/10-K-for-life.jpg",
    Fecha: "2022-03-01",
    Descripcion: "Ven y haz ejercicio, mejora tu salud y estilo de vida.",
    Categoria: "MMB",
    lugar: "Bogota",
    Capacidad: 30000,
    Asistentes: 25698,
    Precio: 3,
    __v: 0,
  },
  {
    _id: "639c723d992482e5f2834bfb",
    Nombre: " MARATON COLOMBIA",
    Imagen: "https://i.postimg.cc/zv67r65z/15kny.jpg",
    Fecha: "2023-03-01",
    Descripcion:
      "Recaudaremos fondos para hospitales y atención médica en este evento único que se llevará a cabo en Bogota.",
    Categoria: "MMB",
    lugar: "Bogota",
    Capacidad: 30000,
    Precio: 3,
    Asistentes: 25698,
    __v: 0,
    estimate: 25698,
  },
  {
    _id: "639c723d992482e5f2834bfd",
    Nombre: "FERIA DEL LIBRO",
    Imagen: "https://i.postimg.cc/Sst763n6/book1.jpg",
    Fecha: "2023-10-15",
    Descripcion: "Trae tu libro escolar sin usar y llévate lo que necesites.",
    Categoria: "Corferias",
    lugar: "Pabellon de lectura",
    Capacidad: 150000,
    estimate: 123286,
    Precio: 1,
    __v: 0,
  },
  {
    _id: "639c723d992482e5f2834bff",
    Nombre: "Sólo para tu cocina",
    Imagen: "https://i.postimg.cc/05FhxHVK/book4.jpg",
    Fecha: "2022-11-09",
    Descripcion:
      "Si eres amante de la gastronomía ven a buscar el recetario que mejor se adapte a tus gustos y los de tu familia.",
    Categoria: "Corferias",
    lugar: "Pabellon de lectura",
    Capacidad: 130000,
    Asistentes: 90000,
    Precio: 100,
    __v: 0,
  },
  {
    _id: "639c723d992482e5f2834c01",
    Nombre: "BATMAN",
    Imagen: "https://i.postimg.cc/vH52y81C/cinema4.jpg",
    Fecha: "2022-3-11",
    Descripcion: "Ven a ver a Batman luchar contra el crimen en ciudad gotica .",
    Categoria: "Cine",
    lugar: "Sala 8",
    Capacidad: 11000,
    Asistentes: 9300,
    Vendidos: 9300,
    Precio: 225,
    __v: 0,
  },
  {
    _id: "639c723d992482e5f2834c03",
    Nombre: "AVENGERS",
    Imagen: "https://i.postimg.cc/T3C92KTN/scale.jpg",
    Fecha: "2023-10-15",
    Descripcion:
      "Marvel's Avengers Premier en 3d, el inicio de una saga épica con tus superhéroes favoritos.",
    Categoria: "Cine",
    lugar: "sala 4",
    Capacidad: 9000,
    Asistentes: 9000,
    Vendidos: 9000,
    Precio: 250,
    __v: 0,
  }
];

const opciones = ['Feria de Comida', 'Museo', 'Concierto', 'MMB', 'Cine', 'Corferias'];

  const checkboxContainer = document.getElementById('checkbox-container');
  opciones.forEach((opcion, index) => {
      checkboxContainer.innerHTML += `
          <label class="form-check form-check-inline">
              <input type="checkbox" class="form-check-input" id="flexCheckChecked${index + 1}" value="${opcion}">
              <span class="form-check-label">${opcion}</span>
          </label>
      `;
  });
  
  const FormDeBusqueda = `
      <form id="search-form" class="search-form">
          <div class="d-flex justify-content-end" id="search-container">
              <input type="text" name="search" id="search-input" placeholder="Buscar" class="form-control">
              <button type="submit">
                  <img src="../imagenes/search.svg" alt="Lupa">
              </button>
              <button type="button" id="clear-button">Limpiar</button>
          </div>
      </form>
  `;
  checkboxContainer.insertAdjacentHTML('afterend', FormDeBusqueda);
  
  document.getElementById('clear-button').addEventListener('click', () => {
      document.getElementById('search-input').value = '';
      aplicarFiltrosYMostrarTarjetas();  
  });
  function filtrarPorNombreYDescripcion(searchTerm) {
      searchTerm = searchTerm.toLowerCase().trim();
      return CardsData.filter(evento => 
          evento.Nombre.toLowerCase().includes(searchTerm) ||
          evento.Descripcion.toLowerCase().includes(searchTerm)
      );
  } 
  function pintarTodasLasTarjetas(data) {
      const contenedor2 = document.getElementById('contenedor2');
      contenedor2.innerHTML = ''; 
      const fechaActual = new Date('2023-01-01');
      const eventosFuturos = data.filter(evento => {
          const fechaEvento = new Date(evento.Fecha);
          return fechaEvento > fechaActual;
      });
      eventosFuturos.forEach(evento => {
          const divTarjeta = document.createElement('div');
          divTarjeta.classList.add('card');
          divTarjeta.innerHTML = `
          <div class="card-header">
              
              <img class="card-img-top" src="${evento.Imagen}" alt="${evento.Nombre}">
          </div>
          <div class="card-body">
              <h2 class="card-title badge text-bg-primary text-wrap d-flex justify-content-center align-items-center">${evento.Nombre}</h2>
              <p class="card-text"><span>Fecha:</span> ${evento.Fecha}</p>
              <p class="card-text"><span>Categoria:</span> ${evento.Categoria}</p>
              <p class="card-text"><span>Descripcion:</span> ${evento.Descripcion}</p>
              <p class="card-text"><span>Capacidad:</span> ${evento.Capacidad}</p>
              <p class="card-text"><span>lugar:</span> ${evento.lugar}</p>
              <p class="card-text"><span>Vendidos:</span> ${evento.Vendidos || 'undefined'}</p>
              <p class="card-text"><span>Asistentes:</span> ${evento.Asistentes || 'undefined'}</p>
          </div>
          <div class="detailsprice d-flex flex-row-reverse justify-content-around align-items-end">
              <a href="DETALLES.html?id=${evento._id}" class="btn btn-primary">Detalles</a>
              <h6 class="h6 d-flex align-items-center">$ ${evento.Precio}</h6>
          </div>
      `;
      contenedor2.appendChild(divTarjeta);
      
      });
  } 
  function manejarBusquedaEnTiempoReal() {
      const searchTerm = document.getElementById('search-input').value;
      const eventosFiltrados = filtrarPorNombreYDescripcion(searchTerm);
      pintarTodasLasTarjetas(eventosFiltrados);
  }
  
  function aplicarFiltrosYMostrarTarjetas() {
      const searchTerm = document.getElementById('search-input').value;
      const eventosFiltradosPorBusqueda = filtrarPorNombreYDescripcion(searchTerm);
  
      const checkboxes = document.querySelectorAll('.form-check-input');
      const categoriasSeleccionadas = Array.from(checkboxes)
          .filter(checkbox => checkbox.checked)
          .map(checkbox => checkbox.value);
  
      const fechaActual = new Date('2023-01-01');
      const eventosFiltradosPorCategoriaYFecha = eventosFiltradosPorBusqueda.filter(evento =>
          categoriasSeleccionadas.length === 0 || categoriasSeleccionadas.includes(evento.Categoria)
      ).filter(evento =>
          new Date(evento.Fecha) > fechaActual
      );
  
      pintarTodasLasTarjetas(eventosFiltradosPorCategoriaYFecha);
  } 
  document.addEventListener('DOMContentLoaded', () => {
      const searchInput = document.getElementById('search-input');
      searchInput.addEventListener('input', aplicarFiltrosYMostrarTarjetas);
  
      const checkboxes = document.querySelectorAll('.form-check-input');
      checkboxes.forEach(checkbox => {
          checkbox.addEventListener('change', aplicarFiltrosYMostrarTarjetas);
      });
      aplicarFiltrosYMostrarTarjetas();
  });
 